<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>MapParsing.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Gremlins</a> &gt; <a href="index.source.html" class="el_package">gremlins</a> &gt; <span class="el_source">MapParsing.java</span></div><h1>MapParsing.java</h1><pre class="source lang-java linenums">package gremlins;

import processing.core.*;
import processing.data.*;

import java.io.*;
import java.util.*;
import java.lang.*;

public class MapParsing{
    /*
    SECTION 1: DECLARATION AND INITIALIZATION OF CLASS ATTRIBUTES
        AND GAME PARAMETERS.
    */
    /*
    NOTE:
        - A tile/sprite is 20 pixels in dimension. This
        attribute is declared again because I'm lazy and I
        don't want to make this class file dependent on the
        main App.java file, although it is already declared there.
     */
    private static final int SPRITE_DIMENSION = App.SPRITESIZE;
    private String layout_file_path;

    /*
    SECTION 2: CONSTRUCTORS
    */
<span class="fc" id="L28">    public MapParsing(){</span>
<span class="fc" id="L29">        layout_file_path = null;</span>
<span class="fc" id="L30">    }</span>

<span class="fc" id="L32">    public MapParsing(String layout_file_path){</span>
<span class="fc" id="L33">        this.layout_file_path = layout_file_path;</span>
<span class="fc" id="L34">    }</span>

    /*
    SECTION 3: PARSING FUNCTIONS

    IMPORTANT NOTE:
        - All the functions below follow the same or have highly similar logic for
        reading files and returning results but each of them return something different 
        and there are slight tweaks in a couple of them so there's no other way but to 
        be repetitive.
        
        - With that said, I've looked into functions with generic types to try to shorten the
        code down but it seems like working with generics is impossible in this case as allocating
        a new generic variable on the heap is not allowed by Java.
    */
    public ArrayList&lt;Stonewall&gt; parseStonewalls(PImage representation){
        /*
        NOTE:
            - The ArrayList instance rarrl stands for
            'return array list'.
         */
<span class="fc" id="L55">        ArrayList&lt;Stonewall&gt; rarrl = new ArrayList&lt;Stonewall&gt;();</span>
        /*
        NOTE:
            - The specifcation states that the stonewalls are listed
            as 'X' in the text files.
         */
<span class="fc" id="L61">        final char IDENTIFIER = 'X';</span>
        try{
<span class="fc" id="L63">            File file_in = new File(this.layout_file_path);</span>
<span class="fc" id="L64">            Scanner jvfin = new Scanner(file_in);</span>
            /*
            NOTE:
                - We are reading the level files here. 
                Since it's two dimensional, we're using
                nested loops.
             */
<span class="fc bfc" id="L71" title="All 2 branches covered.">            for(int i = 0; jvfin.hasNextLine(); i++){</span>
                /*
                NOTE:  
                    - The outer loop deals with the rows
                 */
<span class="fc" id="L76">                String line = jvfin.nextLine();</span>
<span class="fc bfc" id="L77" title="All 2 branches covered.">                for(int j = 0; j &lt; line.length(); j++){</span>
                    /*
                    NOTE:
                        - And the nested loop deals with
                        the columns
                     */
<span class="fc bfc" id="L83" title="All 2 branches covered.">                    if(line.charAt(j) == IDENTIFIER){</span>
<span class="fc" id="L84">                        rarrl.add(new Stonewall(representation, j * SPRITE_DIMENSION, i * SPRITE_DIMENSION));</span>
                    }
                }
            }
<span class="fc" id="L88">        }catch(FileNotFoundException e){</span>
<span class="fc" id="L89">            System.err.println(&quot;Error: file not found. Message from FileHandling.parseStonewalls().&quot;);</span>
<span class="fc" id="L90">            return null;</span>
<span class="fc" id="L91">        }</span>

<span class="fc" id="L93">        return rarrl;</span>
    }

    public ArrayList&lt;Brickwall&gt; parseBrickwalls(PImage[] stages){
        /*
        NOTE:
            - The ArrayList instance rarrl stands for
            'return array list'.
         */
<span class="fc" id="L102">        ArrayList&lt;Brickwall&gt; rarrl = new ArrayList&lt;Brickwall&gt;();</span>
        /*
        NOTE:
            - The specifcation states that the brickwalls are listed
            as 'B' in the text files.
         */
<span class="fc" id="L108">        final char IDENTIFIER = 'B';</span>
        try{
<span class="fc" id="L110">            File file_in = new File(this.layout_file_path);</span>
<span class="fc" id="L111">            Scanner jvfin = new Scanner(file_in);</span>
            /*
            NOTE:
                - We are reading the level files here. 
                Since it's two dimensional, we're using
                nested loops.
             */
<span class="fc bfc" id="L118" title="All 2 branches covered.">            for(int i = 0; jvfin.hasNextLine(); i++){</span>
                /*
                NOTE:  
                    - The outer loop deals with the rows
                 */
<span class="fc" id="L123">                String line = jvfin.nextLine();</span>
<span class="fc bfc" id="L124" title="All 2 branches covered.">                for(int j = 0; j &lt; line.length(); j++){</span>
                    /*
                    NOTE:
                        - And the nested loop deals with
                        the columns.
                     */
<span class="fc bfc" id="L130" title="All 2 branches covered.">                    if(line.charAt(j) == IDENTIFIER){</span>
<span class="fc" id="L131">                        rarrl.add(new Brickwall(stages, j * SPRITE_DIMENSION, i * SPRITE_DIMENSION));</span>
                    }
                }
            }
<span class="fc" id="L135">        }catch(FileNotFoundException e){</span>
<span class="fc" id="L136">            System.err.println(&quot;Error: file not found. Message from FileHandling.parseBrickwalls().&quot;);</span>
<span class="fc" id="L137">            return null;</span>
<span class="fc" id="L138">        }</span>

<span class="fc" id="L140">        return rarrl;</span>
    }

    public ArrayList&lt;Gremlin&gt; parseGremlins(PImage representation){
        /*
        NOTE:
            - The ArrayList instance rarrl stands for
            'return array list'.
         */
<span class="fc" id="L149">        ArrayList&lt;Gremlin&gt; rarrl = new ArrayList&lt;Gremlin&gt;();</span>
        /*
        NOTE:
            - The specifcation states that the gremlins/enemies are listed
            as 'G' in the text files.
         */
<span class="fc" id="L155">        final char IDENTIFIER = 'G';</span>
        try{
<span class="fc" id="L157">            File file_in = new File(this.layout_file_path);</span>
<span class="fc" id="L158">            Scanner jvfin = new Scanner(file_in);</span>
            /*
            NOTE:
                - We are reading the level files here. 
                Since it's two dimensional, we're using
                nested loops.
             */
<span class="fc bfc" id="L165" title="All 2 branches covered.">            for(int i = 0; jvfin.hasNextLine(); i++){</span>
                /*
                NOTE:  
                    - The outer loop deals with the rows.
                 */
<span class="fc" id="L170">                String line = jvfin.nextLine();</span>
<span class="fc bfc" id="L171" title="All 2 branches covered.">                for(int j = 0; j &lt; line.length(); j++){</span>
                    /*
                    NOTE:
                        - And the nested loop deals with
                        the columns.
                     */
<span class="fc bfc" id="L177" title="All 2 branches covered.">                    if(line.charAt(j) == IDENTIFIER){</span>
<span class="fc" id="L178">                        rarrl.add(new Gremlin(representation, j * SPRITE_DIMENSION, i * SPRITE_DIMENSION));</span>
                    }
                }
            }
<span class="fc" id="L182">        }catch(FileNotFoundException e){</span>
<span class="fc" id="L183">            System.err.println(&quot;Error: file not found. Message from FileHandling.parseGremlins().&quot;);</span>
<span class="fc" id="L184">            return null;</span>
<span class="fc" id="L185">        }</span>

<span class="fc" id="L187">        return rarrl;</span>
    }

    public Wizard parseWizard(PImage[] directions){
        /*
        NOTE:
            - The specifcation states that the wizard is listed
            as 'W' in the text files.
         */
<span class="fc" id="L196">        Wizard player = new Wizard();</span>
<span class="fc" id="L197">        final char IDENTIFIER = 'W';</span>
        try{
<span class="fc" id="L199">            File file_in = new File(this.layout_file_path);</span>
<span class="fc" id="L200">            Scanner jvfin = new Scanner(file_in);</span>
            /*
            NOTE:
                - We are reading the level files here. 
                Since it's two dimensional, we're using
                nested loops.
             */
<span class="pc bpc" id="L207" title="1 of 2 branches missed.">            for(int i = 0; jvfin.hasNextLine(); i++){</span>
                /*
                NOTE:  
                    - The outer loop deals with the rows.
                 */
<span class="fc" id="L212">                String line = jvfin.nextLine();</span>
<span class="fc bfc" id="L213" title="All 2 branches covered.">                for(int j = 0; j &lt; line.length(); j++){</span>
                    /*
                    NOTE:
                        - And the nested loop deals with
                        the columns.
                     */
<span class="fc bfc" id="L219" title="All 2 branches covered.">                    if(line.charAt(j) == IDENTIFIER){</span>
<span class="fc" id="L220">                        player = new Wizard(directions, j * SPRITE_DIMENSION, i * SPRITE_DIMENSION);</span>
<span class="fc" id="L221">                        return player;</span>
                    }
                }
            }
<span class="fc" id="L225">        }catch(FileNotFoundException e){</span>
<span class="fc" id="L226">            System.err.println(&quot;Error: file not found. Message from FileHandling.parseWizard().&quot;);</span>
<span class="fc" id="L227">            return null;</span>
<span class="nc" id="L228">        }</span>

<span class="nc" id="L230">        return player;</span>
    }
    public Door parseDoor(PImage representation){
<span class="fc" id="L233">        Door exit = new Door();</span>
        /*
        NOTE:
            - The specifcation states that the doors are listed
            as 'E' in the text files.
         */
<span class="fc" id="L239">        final char IDENTIFIER = 'E';</span>
        try{
<span class="fc" id="L241">            File file_in = new File(this.layout_file_path);</span>
<span class="fc" id="L242">            Scanner jvfin = new Scanner(file_in);</span>
            /*
            NOTE:
                - We are reading the level files here. 
                Since it's two dimensional, we're using
                nested loops.
             */
<span class="pc bpc" id="L249" title="1 of 2 branches missed.">            for(int i = 0; jvfin.hasNextLine(); i++){</span>
                /*
                NOTE:  
                    - The outer loop deals with the rows
                 */
<span class="fc" id="L254">                String line = jvfin.nextLine();</span>
<span class="fc bfc" id="L255" title="All 2 branches covered.">                for(int j = 0; j &lt; line.length(); j++){</span>
                    /*
                    NOTE:
                        - And the nested loop deals with
                        the columns.
                     */
<span class="fc bfc" id="L261" title="All 2 branches covered.">                    if(line.charAt(j) == IDENTIFIER){</span>
<span class="fc" id="L262">                        exit = new Door(representation, j * SPRITE_DIMENSION, i * SPRITE_DIMENSION);</span>
<span class="fc" id="L263">                        return exit;</span>
                    }
                }
            }
<span class="fc" id="L267">        }catch(FileNotFoundException e){</span>
<span class="fc" id="L268">            System.err.println(&quot;Error: file not found. Message from FileHandling.parseDoor().&quot;);</span>
<span class="fc" id="L269">            return null;</span>
<span class="nc" id="L270">        }</span>

<span class="nc" id="L272">        return exit;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>